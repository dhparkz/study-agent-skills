![2장 기획 및 설계](./covers//02-planning_and_design.png)

# 2장 기획 및 설계

## 유스케이스부터 시작하기

코드를 쓰기 전에, 스킬이 가능하게 해야 할 **구체적인 유스케이스 2~3개**를 먼저 정하세요.

### 좋은 유스케이스 정의 예시

**유스케이스:** 프로젝트 스프린트 계획(Project Sprint Planning)
**트리거:** 사용자가 "이번 스프린트 계획 도와줘" 또는 "스프린트 태스크 만들어줘"라고 말할 때
**단계:**
1. Linear에서 현재 프로젝트 상태 가져오기(MCP 경유)
2. 팀 velocity와 capacity 분석
3. 태스크 우선순위 제안
4. Linear에 적절한 라벨/추정치를 포함해 태스크 생성
**결과:** 태스크가 생성된 완성된 스프린트 계획

### 스스로에게 던질 질문

- 사용자는 무엇을 달성하고 싶어 하는가?
- 이를 위해 어떤 다단계 워크플로가 필요한가?
- 어떤 도구(내장 도구 or MCP)가 필요한가?
- 어떤 도메인 지식/모범 사례를 스킬 안에 심어야 하는가?

## 흔한 스킬 유스케이스 카테고리

Anthropic에서는 스킬의 일반적인 유스케이스를 세 가지로 관찰했습니다.

### 카테고리 1: 문서 & 자산 생성(Document & Asset Creation)

**사용 목적:** 문서, 프레젠테이션, 앱, 디자인, 코드 등 **일관되고 고품질**의 결과물을 만들기

**실제 예시:** [frontend-design skill](https://github.com/anthropics/skills/tree/main/skills/frontend-design) ([docx, pptx, xlsx, ppt 스킬](https://github.com/anthropics/skills/tree/main/skills)도 참고)

> "독창적이고 프로덕션 수준의 프론트엔드 UI를 높은 디자인 퀄리티로 생성합니다. 웹 컴포넌트/페이지/아티팩트/포스터/애플리케이션을 만들 때 사용하세요."

**핵심 기법**
- 스타일 가이드/브랜드 기준을 내장
- 일관된 출력 구조를 위한 템플릿
- 최종화 전에 품질 체크리스트 수행
- 외부 도구 없이 Claude 내장 기능만으로 가능

### 카테고리 2: 워크플로 자동화(Workflow Automation)

**사용 목적:** 일관된 방법론이 도움이 되는 다단계 프로세스(여러 MCP 서버를 넘나드는 조정 포함)

**실제 예시:** [skill-creator skill](https://github.com/anthropics/skills/blob/main/skills/skill-creator/SKILL.md)

> "새 스킬을 만들기 위한 인터랙티브 가이드입니다. 유스케이스 정의, 프론트매터 생성, 지침 작성, 검증까지 사용자를 단계별로 안내합니다."

**핵심 기법**
- 검증 게이트가 있는 단계별 워크플로
- 공통 구조용 템플릿
- 내장된 리뷰/개선 제안
- 반복 정제(Iterative refinement) 루프

### 카테고리 3: MCP 개선(MCP Enhancement)

**사용 목적:** MCP 서버가 제공하는 도구 접근 위에, "어떻게 쓰는지" 워크플로 가이드를 얹어 강화

**실제 예시:** [sentry-code-review skill (from Sentry)](https://github.com/getsentry/sentry-for-claude/tree/main/skills)

> "Sentry의 에러 모니터링 데이터를 MCP 서버로 활용해 GitHub Pull Request에서 감지된 버그를 자동으로 분석하고 수정합니다."

**핵심 기법**
- 여러 MCP 호출을 순차적으로 조정
- 도메인 전문성을 내장
- 사용자가 원래 직접 지정해야 하는 컨텍스트를 제공
- 흔한 MCP 이슈에 대한 에러 핸들링


## 성공 기준 정의하기

### 스킬이 잘 동작한다는 걸 어떻게 알 수 있을까요?

아래 지표들은 "정확한 임계값"이라기보다 **대략적인 벤치마크(목표치)**입니다. 엄격함을 추구하되, 어느 정도는 감각("vibes") 기반 평가 요소가 있을 수 있다는 점을 받아들이세요. Anthropic은 더 견고한 측정 가이드와 도구를 개발 중입니다.

### 정량 지표(Quantitative)

- **관련 질의의 90%에서 스킬이 트리거된다**
  – 측정 방법: 트리거되어야 하는 테스트 질의 10~20개를 실행해, 자동 로드 vs 수동 호출 비율을 기록합니다.
- **워크플로를 X번의 도구 호출로 완료한다**
  – 측정 방법: 스킬 활성/비활성 상태에서 같은 작업을 비교해 도구 호출 수와 총 토큰 사용량을 측정합니다.
- **워크플로당 실패한 API 호출이 0회다**
  – 측정 방법: 테스트 중 MCP 서버 로그를 모니터링하고 재시도율/에러 코드를 추적합니다.

### 정성 지표(Qualitative)

- **사용자가 Claude에게 다음 단계를 계속 프롬프트로 알려줄 필요가 없다**
  – 평가 방법: 테스트 중 내가 얼마나 자주 방향을 재지정/명확화해야 했는지 기록하고, 베타 사용자 피드백을 받습니다.
- **사용자 수정 없이 워크플로가 완료된다**
  – 평가 방법: 같은 요청을 3~5회 실행해 결과의 구조적 일관성과 품질을 비교합니다.
- **세션이 달라도 결과가 일관되다**
  – 평가 방법: 신규 사용자도 최소한의 가이드로 첫 시도에 목표를 달성할 수 있는지 확인합니다.

## 기술 요구사항

### 파일 구조

```yaml
your-skill-name/
├── SKILL.md              # 필수 - 메인 스킬 파일
├── scripts/              # 선택 - 실행가능한 코드
│   ├── process_data.py # Example
│   └── validate.sh # Example
├── references/           # 선택 - 문서화된 내용
│   ├── api-guide.md # Example
│   └── examples/ # Example
└── assets/              # 선택 - templates, etc.
    └── report-template.md # Example
```

### 중요 규칙(Critical rules)

**SKILL.md 파일명 규칙:**
- 반드시 정확히 SKILL.md (case-sensitive) 이어야 합니다(대소문자 구분).
- 변형 불가(SKILL.MD, skill.md, etc. 등).

**스킬 폴더명 규칙:**
- kebab-case 사용: `notion-project-setup` ✅
- 공백 금지: `Notion Project Setup` ❌
- 언더스코어(_) 금지: `notion_project_setup` ❌
- 대문자 사용 금지: `NotionProjectSetup` ❌

**README.md 금지:**
- 스킬 폴더 안에 README.md를 넣지 마세요.
- 모든 문서는 SKILL.md 또는 references/에 둡니다.
- 참고: GitHub로 배포할 때는 레포지토리(루트) 레벨 README는 인간 사용자 안내용으로 여전히 유용합니다 — '배포 및 공유' 챕터 참고.

## YAML 프론트매터: 가장 중요한 부분

YAML 프론트매터는 Claude가 스킬을 로드할지 결정하는 기준입니다. **여기를 제대로 쓰는 것이 핵심**입니다.

### 최소 요구 형식

```yaml
---
name: your-skill-name
description: What it does. Use when user asks to [specific
phrases].
---
```

시작하는 데 필요한 건 이것뿐입니다.

### 필드 요구사항

**name (필수):**
- kebab-case만
- 공백/대문자 금지
- 폴더명과 일치 권장

**description (필수):**
- 반드시 둘 다 포함:
  - 무엇을 하는지
  - 언제 쓰는지(트리거 조건)
- 1024자 미만
- XML 태그(< 또는 >) 금지
- 사용자가 실제로 말할 법한 구체적 작업 포함
- 관련 있다면 파일 타입 언급

**license (선택):**
- 오픈소스 스킬이면 사용
- 흔히: MIT, Apache-2.0

**compatibility (선택):**
- 1~500자
- 환경 요구사항을 표시합니다(예: 대상 제품, 필요한 시스템 패키지, 네트워크 접근 필요 등).

**metadata (선택):**
- 임의의 커스텀 키-값 쌍(아무 키나 추가 가능)
- 권장: author, version, mcp-server
- 예시:

```yaml
metadata:
	 author: ProjectHub
	 version: 1.0.0 mcp-server: projecthub
```

## 보안 제한(Security restrictions)

프론트매터(frontmatter)에서 **금지되는 것**:
- XML 꺾쇠괄호 `< >`
- `name`에 `"claude"` 또는 `"anthropic"` 포함(예약어)

이유: 프론트매터는 Claude의 시스템 프롬프트에 들어갈 수 있습니다. 악성 콘텐츠가 지침을 "주입"하는 것을 막기 위해 제한이 존재합니다.

## 효과적인 스킬 작성하기

### description 필드(트리거의 핵심)

[Anthropic 엔지니어링 블로그](https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills)에 따르면:

> "이 메타데이터는 전체를 컨텍스트에 로드하지 않고도, Claude가 각 스킬을 언제 사용해야 하는지 알 수 있을 만큼의 정보만 제공합니다."

이는 점진적 공개(Progressive Disclosure)의 **첫번째 단계**입니다.

**권장 구조:**
`[무엇을 하는지] + [언제 쓰는지] + [핵심 역량/대상]`

좋은 description 예시:

```yaml
# 좋음 - 구체적이고 바로 실행 가능
description: Figma 디자인 파일을 분석해 개발자 핸드오프 문서를 생성합니다.
사용자가 .fig 파일을 업로드하거나 "디자인 스펙", "컴포넌트 문서", "디자인-코드 핸드오프"를 요청할 때 사용합니다.
```

```yaml
# 좋음 - 트리거 문구(사용자 표현)가 포함됨
description: Linear 프로젝트 워크플로(스프린트 계획, 태스크 생성, 상태 추적)를 관리합니다.
사용자가 "스프린트", "Linear 태스크", "프로젝트 계획"을 언급하거나 "티켓 만들어줘"라고 요청할 때 사용합니다.
```

```yaml
# 좋음 - 가치(결과)가 명확함
description: PayFlow의 고객 온보딩을 처음부터 끝까지 처리합니다.
계정 생성, 결제 설정, 구독 관리를 포함하며,
사용자가 "신규 고객 온보딩", "구독 설정", "PayFlow 계정 생성"을 말할 때 사용합니다.
```

나쁜 description 예시:

```yaml
# 나쁨 - 너무 모호함
description: 프로젝트를 도와줍니다.

# 나쁨 - 언제 쓰는지(트리거)가 없음
description: 정교한 다중 페이지 문서 시스템을 생성합니다.

# 나쁨 - 너무 기술적이며 사용자 트리거가 없음
description: 계층적 관계를 가진 Project 엔티티 모델을 구현합니다.
```

## 메인 지침 작성하기

프론트매터(frontmatter) 뒤에는 Markdown으로 **실제 실행 지침(레시피)**을 작성합니다.

권장 구조:

```yaml
---
name: your-skill
description: [...]
---

# 스킬 이름

## 지침(Instructions)

### 단계 1: [첫 번째 큰 단계]
여기에는 무엇을 하는지 명확하게 적습니다.

예시:
```bash
python scripts/fetch_data.py --project-id PROJECT_ID
```
성공 조건(예상 결과): [성공 시 어떤 출력/상태가 나오는지 설명]

(필요한 만큼 단계 추가)

## 예시(Examples)

### 예시 1: [자주 등장하는 시나리오]
사용자 발화: "마케팅 캠페인 새로 세팅해줘"
동작:
1. MCP로 기존 캠페인 목록 조회
2. 입력 파라미터로 신규 캠페인 생성
결과: 생성 완료(확인 링크 포함)

(필요한 만큼 예시 추가)

## 문제 해결(Troubleshooting)

- 에러: [자주 나오는 에러 메시지]
  - 원인: [왜 발생하는지]
  - 해결: [어떻게 해결하는지]

(필요한 만큼 에러 케이스 추가)


## 지침 작성 베스트 프랙티스

### 구체적이고 실행 가능하게 쓰기

✅ 좋은 예:
```
`python scripts/validate.py --input {filename}`를 실행해 데이터 형식을 확인합니다.
검증이 실패하면 흔한 원인은 다음과 같습니다:
- 필수 필드 누락(CSV에 추가)
- 잘못된 날짜 형식(YYYY-MM-DD 사용)
```
❌ 나쁜 예:
```
진행하기 전에 데이터를 검증합니다.
```

### 에러 핸들링 포함하기
```
## 흔한 문제(Common Issues)

### MCP 연결 실패(MCP Connection Failed)
"Connection refused"가 보이면:
1. MCP 서버가 실행 중인지 확인: Settings > Extensions
2. API 키가 유효한지 확인(권한/만료 포함)
3. 재연결 시도: Settings > Extensions > [Your Service] > Reconnect
```

### 번들 리소스는 명확히 참조하기
```
쿼리를 작성하기 전에 `references/api-patterns.md`에서 다음을 확인하세요:
- Rate limiting(요청 제한) 가이드
- Pagination(페이지네이션) 패턴
- 에러 코드와 처리 방식
```

### 점진적 공개를 활용하기

SKILL.md는 **핵심 지침에 집중**하세요. 상세 문서는 `references/`로 옮기고 링크하세요. ([Core Design Principle](https://claude.com/blog/equipping-agents-for-the-real-world-with-agent-skills) - 3단계 시스템 설명 참고)

---
> 원문: [**Anthropic - The Complete Guide to Building Skills for Claude.pdf**](https://resources.anthropic.com/hubfs/The-Complete-Guide-to-Building-Skill-for-Claude.pdf) from https://claude.com/blog/complete-guide-to-building-skills-for-claude
>
> 이 문서는 원문 PDF의 **한국어로 번역**한 것입니다.  원문 및 이미지의 저작권은 [Anthropic](https://www.anthropic.com/)에 있습니다. 
> 
> 번역에는 Claude Opus 4.6, ChatGPT 5.2 을 사용했습니다.